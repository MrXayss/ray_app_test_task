# ray_app_test_task

Данное приложение запускает веб-приложение и выполняет ряд функциий

### Установка
1. Вам нужно установить все необходимые зависимости при помощи следующей команды
```
pip install -r requirements.txt
```
2. Вам необходимо создать в PostgreSQL базу данных
3. Необходимо в папке ray_app_test_task создать файл db_settings.py с следующим содержанием
```
DB_NAME = 'название_бд'
DB_USER = 'пользователь_бд'
DB_PASSWORD = 'пароль'
DB_HOST = 'айпи_где_размещена_бд'
DB_PORT = 'порт'
```
### Запуск

1. Запускаем сервер с БД чтобы сервис мог подключиться.
2. Запускаем сервис
```
python manage.py runserver
```

### Тестирование
1. Тестирование запускается следующей командой
```
python manage.py test
```
2. Для того чтобы проверить покрытие тестами необходимо выполнить следующие команды
```
coverage run --source='.' manage.py test
coverage report
```

## PS
Для проверки ассинхронной функции на главной страницы сервиса нажмите кнопку "Скачать файл".
Также есть взаимодействи с внешним апи, для отображения погоды в городе Сургуте, увидеть можете на главной странице.
Была также создана фоновая задача, которая каждые 5 часов создает резервную копию БД и сохраняет в папку backup_bd. При желании можно изменить интервал в файле scheduler.py

